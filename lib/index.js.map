{"version":3,"file":"index.js","sources":["../src/scrollama-context.js","../src/scrollama.jsx","../src/step.jsx"],"sourcesContent":["import React from \"react\";\n\nexport const ScrollamaContext = React.createContext(() => {});","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\nimport scrollama from \"scrollama\"\n\nclass Scrollama extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.scroller = scrollama()\n    this.steps = []\n  }\n\n  setupRef(ref) {\n    this.steps.push(ref.current)\n    return () => {\n      this.steps.splice(this.steps.indexOf(ref.current), 1)\n    }\n  }\n\n  componentDidMount() {\n    const {\n      offset = 0.5,\n      progress = false,\n      debug = false,\n      onStepEnter = () => {},\n      onStepExit = () => {},\n      onStepProgress = () => {},\n      threshold = 4,\n      once = false,\n      parent = undefined\n    } = this.props\n\n    this.scroller\n      .setup({\n        step: this.steps,\n        offset,\n        progress: progress ? true : false,\n        debug: debug ? true : false,\n        threshold, // the percentage of the viewport that must be visible\n        once,\n        parent,\n      })\n      .onStepEnter((response) => {\n        onStepEnter(response)\n      })\n      .onStepExit((response) => {\n        onStepExit(response)\n      })\n      .onStepProgress((response) => {\n        onStepProgress(response)\n      })\n\n    window.addEventListener(\"resize\", this.scroller.resize)\n  }\n  componentWillUnmount() {\n    this.scroller.destroy()\n    window.removeEventListener(\"resize\", this.scroller.resize)\n  }\n\n  render() {\n    const { children, \n      offset, \n      progress, \n      threshold, \n      onStepProgress, \n      onStepEnter, \n      onStepExit, \n      debug, \n      ...primitiveProps \n    } = this.props\n\n    return (\n      <div {...primitiveProps}>\n        <ScrollamaContext.Provider value={(ref) => this.setupRef(ref)}>\n          {children}\n        </ScrollamaContext.Provider>\n      </div>\n    )\n  }\n}\n\nexport default Scrollama\n","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\n\nclass Step extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.stepRef = React.createRef()\n    this.remove = null\n  }\n\n  componentDidMount() {\n    this.remove = this.context(this.stepRef)\n  }\n\n  componentWillUnmount() {\n    this.remove()\n  }\n\n  render() {\n    const { children, ...primitiveProps } = this.props\n    return (\n      <div ref={this.stepRef} {...primitiveProps}>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default Step\n"],"names":["ScrollamaContext","React","createContext","Scrollama","props","scroller","scrollama","steps","ref","push","current","splice","indexOf","offset","progress","debug","onStepEnter","onStepExit","onStepProgress","threshold","once","parent","undefined","setup","step","response","window","addEventListener","resize","destroy","removeEventListener","children","primitiveProps","_excluded","setupRef","Component","Step","stepRef","createRef","remove","context"],"mappings":"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"}