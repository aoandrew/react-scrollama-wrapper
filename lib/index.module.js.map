{"version":3,"file":"index.module.js","sources":["../src/scrollama-context.js","../src/scrollama.jsx","../src/step.jsx"],"sourcesContent":["import React from \"react\";\n\nexport const ScrollamaContext = React.createContext(() => {});","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\nimport scrollama from \"scrollama\"\n\nclass Scrollama extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.scroller = scrollama()\n    this.steps = []\n  }\n\n  setupRef(ref) {\n    this.steps.push(ref.current)\n    return () => {\n      this.steps.splice(this.steps.indexOf(ref.current), 1)\n    }\n  }\n\n  componentDidMount() {\n    const {\n      offset = 0.5,\n      progress = false,\n      debug = false,\n      onStepEnter = () => {},\n      onStepExit = () => {},\n      onStepProgress = () => {},\n    } = this.props\n\n    this.scroller\n      .setup({\n        step: this.steps,\n        offset,\n        progress,\n        debug,\n      })\n      .onStepEnter((response) => {\n        onStepEnter(response)\n      })\n      .onStepExit((response) => {\n        onStepExit(response)\n      })\n      .onStepProgress((response) => {\n        onStepProgress(response)\n      })\n\n    window.addEventListener(\"resize\", this.scroller.resize)\n  }\n  componentWillUnmount() {\n    this.scroller.destroy()\n    window.removeEventListener(\"resize\", this.scroller.resize)\n  }\n\n  render() {\n    const { children, style = {}, className = '' } = this.props\n    return (\n      <div style={style} className={className}>\n        <ScrollamaContext.Provider value={(ref) => this.setupRef(ref)}>\n          {children}\n        </ScrollamaContext.Provider>\n      </div>\n    )\n  }\n}\n\nexport default Scrollama\n","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\n\nclass Step extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.stepRef = React.createRef()\n    this.remove = null\n  }\n\n  componentDidMount() {\n    this.remove = this.context(this.stepRef)\n  }\n\n  componentWillUnmount() {\n    this.remove()\n  }\n\n  render() {\n    const { children, ...primitiveProps } = this.props\n    return (\n      <div ref={this.stepRef} {...primitiveProps}>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default Step\n"],"names":["ScrollamaContext","React","createContext","Scrollama","props","scroller","scrollama","steps","ref","push","current","splice","indexOf","offset","progress","debug","onStepEnter","onStepExit","onStepProgress","setup","step","response","window","addEventListener","resize","destroy","removeEventListener","children","style","className","setupRef","Component","Step","stepRef","createRef","remove","context","primitiveProps"],"mappings":"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"}