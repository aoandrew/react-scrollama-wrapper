{"version":3,"file":"index.module.js","sources":["../src/scrollama-context.js","../src/scrollama.jsx","../src/step.jsx"],"sourcesContent":["import React from \"react\";\n\nexport const ScrollamaContext = React.createContext(() => {});","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\nimport scrollama from \"scrollama\"\n\nclass Scrollama extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.scroller = scrollama()\n    this.steps = []\n  }\n\n  setupRef(ref) {\n    this.steps.push(ref.current)\n    return () => {\n      this.steps.splice(this.steps.indexOf(ref.current), 1)\n    }\n  }\n\n  componentDidMount() {\n    const {\n      offset = 0.5,\n      progress = false,\n      debug = false,\n      onStepEnter = () => {},\n      onStepExit = () => {},\n      onStepProgress = () => {},\n      threshold = 4,\n      once = false,\n      parent = undefined\n    } = this.props\n\n    // this.rest = rest\n\n    this.scroller\n      .setup({\n        step: this.steps,\n        offset,\n        progress: progress ? true : false,\n        debug: debug ? true : false,\n        threshold, // the percentage of the viewport that must be visible\n        once,\n        parent,\n      })\n      .onStepEnter((response) => {\n        onStepEnter(response)\n      })\n      .onStepExit((response) => {\n        onStepExit(response)\n      })\n      .onStepProgress((response) => {\n        onStepProgress(response)\n      })\n\n    window.addEventListener(\"resize\", this.scroller.resize)\n  }\n  componentWillUnmount() {\n    this.scroller.destroy()\n    window.removeEventListener(\"resize\", this.scroller.resize)\n  }\n\n  render() {\n    const { children, \n      offset, \n      progress, \n      threshold, \n      onStepProgress, \n      onStepEnter, \n      onStepExit, \n      debug, \n      ...primitiveProps \n    } = this.props\n\n    return (\n      <div {...primitiveProps}>\n        <ScrollamaContext.Provider value={(ref) => this.setupRef(ref)}>\n          {children}\n        </ScrollamaContext.Provider>\n      </div>\n    )\n  }\n}\n\nexport default Scrollama\n","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\n\nclass Step extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.stepRef = React.createRef()\n    this.remove = null\n  }\n\n  componentDidMount() {\n    this.remove = this.context(this.stepRef)\n  }\n\n  componentWillUnmount() {\n    this.remove()\n  }\n\n  render() {\n    const { children, ...primitiveProps } = this.props\n    return (\n      <div ref={this.stepRef} {...primitiveProps}>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default Step\n"],"names":["ScrollamaContext","React","createContext","Scrollama","props","scroller","scrollama","steps","ref","push","current","splice","indexOf","offset","progress","debug","onStepEnter","onStepExit","onStepProgress","threshold","once","parent","undefined","setup","step","response","window","addEventListener","resize","destroy","removeEventListener","children","primitiveProps","_excluded","setupRef","Component","Step","stepRef","createRef","remove","context"],"mappings":"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"}