{"version":3,"file":"index.module.js","sources":["../src/scrollama-context.js","../src/scrollama.jsx","../src/step.jsx"],"sourcesContent":["import React from \"react\";\n\nexport const ScrollamaContext = React.createContext(() => {});","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\nimport scrollama from \"scrollama\"\n\nclass Scrollama extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.scroller = scrollama()\n    this.steps = []\n  }\n\n  setupRef(ref) {\n    this.steps.push(ref.current)\n    return () => {\n      this.steps.splice(this.steps.indexOf(ref.current), 1)\n    }\n  }\n\n  componentDidMount() {\n    const {\n      offset = 0.5,\n      progress = false,\n      debug = false,\n      onStepEnter = () => {},\n      onStepExit = () => {},\n      onStepProgress = () => {},\n      threshold = 4,\n      once = false,\n      parent = undefined\n    } = this.props\n\n    this.scroller\n      .setup({\n        step: this.steps,\n        offset,\n        progress: progress ? 1 : 0,\n        debug: debug ? 1 : 0,\n        threshold,\n        once,\n        parent,\n      })\n      .onStepEnter((response) => {\n        onStepEnter(response)\n      })\n      .onStepExit((response) => {\n        onStepExit(response)\n      })\n      .onStepProgress((response) => {\n        onStepProgress(response)\n      })\n\n    window.addEventListener(\"resize\", this.scroller.resize)\n  }\n  componentWillUnmount() {\n    this.scroller.destroy()\n    window.removeEventListener(\"resize\", this.scroller.resize)\n  }\n\n  render() {\n    const { children, ...primitiveProps } = this.props\n    return (\n      <div {...primitiveProps}>\n        <ScrollamaContext.Provider value={(ref) => this.setupRef(ref)}>\n          {children}\n        </ScrollamaContext.Provider>\n      </div>\n    )\n  }\n}\n\nexport default Scrollama\n","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\n\nclass Step extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.stepRef = React.createRef()\n    this.remove = null\n  }\n\n  componentDidMount() {\n    this.remove = this.context(this.stepRef)\n  }\n\n  componentWillUnmount() {\n    this.remove()\n  }\n\n  render() {\n    const { children, ...primitiveProps } = this.props\n    return (\n      <div ref={this.stepRef} {...primitiveProps}>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default Step\n"],"names":["ScrollamaContext","React","createContext","Scrollama","props","scroller","scrollama","steps","ref","push","current","splice","indexOf","offset","progress","debug","onStepEnter","onStepExit","onStepProgress","threshold","once","parent","undefined","setup","step","response","window","addEventListener","resize","destroy","removeEventListener","children","primitiveProps","setupRef","Component","Step","stepRef","createRef","remove","context"],"mappings":"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"}